(function(){"use strict";const z="#wrapper{display:flex;flex-direction:column;font-family:inherit}.wrapper-dialog{position:fixed;top:60px;right:60px;z-index:1000;width:340px;max-height:480px;background:#fff;border-radius:.25rem;box-shadow:0 0 6px #0000911a;border:1px solid #e5e5e5;overflow:hidden}#header{display:flex;justify-content:center;align-items:center;padding:4px 16px;background:transparent;border-bottom:1px solid #dfe2ea;min-height:48px;position:relative}#header-logo{height:25px;width:auto;object-fit:contain;display:block;margin:0 auto}#close{position:absolute;right:16px}#close{background:none;border:none;color:#64748b;cursor:pointer;font-size:36px;width:36px;height:36px;display:flex;align-items:center;justify-content:center;border-radius:4px;transition:background-color .2s}#close:hover{background-color:#f0f0f0}#close:focus{outline:2px solid #0a76f6}#footer{display:flex;padding:16px;background:transparent;border-top:1px solid #dfe2ea;justify-content:flex-end}#ok-button{background:#3e5de7;color:#fff;border:none;border-radius:6px;padding:8px 16px;font-size:14px;font-weight:600;cursor:pointer;transition:background-color .2s;min-width:60px}#ok-button:hover{background:#1d4ed8}#ok-button:focus{outline:2px solid #0a76f6}#content{flex:1;padding:16px;display:flex;flex-direction:column;overflow-y:auto;min-height:0}#loading{display:flex;align-items:center;justify-content:center;padding:40px 20px;color:#666;font-size:14px}#error{display:flex;align-items:center;justify-content:center;padding:40px 20px;color:#dc3545;font-size:14px;text-align:center}#services-grid{grid-template-columns:repeat(3,1fr);gap:4px;justify-items:center;list-style:none;padding:0;margin:0}.service-card{background:transparent;text-align:center;transition:all .2s ease;position:relative;display:flex;flex-direction:column;align-items:center;width:100%;list-style:none;padding:0;margin:0}.service-card:hover{background-color:#eef1f4;border-radius:6px}.service-card a{position:relative;padding:8px;width:100%;text-decoration:none;display:block}.service-logo{width:42px;height:42px;object-fit:contain}.maturity-badge{position:absolute;top:40px;left:50%;transform:translate(-50%);background:#eef1f4;color:#2845c1;border-radius:12px;padding:2px 4px;font-size:9px;line-height:9px;font-weight:700;text-transform:uppercase;letter-spacing:.3px;white-space:nowrap}.service-info{display:flex;flex-direction:column;align-items:center;width:100%;padding-top:4px}.service-name{font-weight:600;font-size:14px;color:#1e40af;margin-bottom:2px;line-height:1.2;text-align:center}@media (max-width: 480px){#wrapper{width:100%;inset:0!important;border-radius:0;max-height:100vh;position:fixed!important}#header{height:40px;display:flex}#header-logo{height:35px}#footer{display:flex}#services-grid{grid-template-columns:repeat(3,1fr);gap:12px}.service-card{width:70px;padding:6px}.service-logo,.service-logo-placeholder{width:40px;height:40px}.service-name{font-size:11px}}#content::-webkit-scrollbar{width:4px}#content::-webkit-scrollbar-track{background:transparent}#content::-webkit-scrollbar-thumb{background:#cbd5e1;border-radius:2px}#content::-webkit-scrollbar-thumb:hover{background:#94a3b8}";function D(e,t,r){const d=`lasuite-widget-${e}-shadow`,s=document.getElementById(d);s&&s.remove();const n=document.createElement("div");n.id=d;const l=n.attachShadow({mode:"open"}),p=document.createElement("style");p.textContent=r;const u=document.createElement("div");return u.innerHTML=t,l.appendChild(p),l.appendChild(u),n}const y="lasuite-widget",c=(e,t,r,d)=>document.dispatchEvent(new CustomEvent(`${y}-${e}-${t}`,r?{detail:r}:void 0)),h=(e,t,r,d,s)=>{const n=l=>s(l.detail);return document.addEventListener(`${y}-${e}-${t}`,n,d?{once:!0}:void 0),()=>document.removeEventListener(`${y}-${e}-${t}`,n,d?{once:!0}:void 0)},b=2,_=e=>window._lasuite_widget?._loaded?.[e],F=(e,t)=>{window._lasuite_widget?._loaded&&(window._lasuite_widget._loaded[e]=t)},W=e=>{window._lasuite_widget||(window._lasuite_widget=[]);const t=window._lasuite_widget;if(t._loaded||(t._loaded={}),_(e)!==b){t.push=(...r)=>{for(const d of r)_(d[0])===b?c(d[0],d[1],d[2]):t[t.length]=d;return t.length},F(e,b);for(const r of t.splice(0,t.length))t.push(r)}c(e,"loaded")},B=e=>e.offsetWidth>0&&e.offsetHeight>0,H=(e,t,r)=>{const d=s=>{if(s.key!=="Tab")return;const n=Array.from(t.querySelectorAll(r)).filter(u=>B(u));if(n.length===0)return;const l=n[0],p=n[n.length-1];s.shiftKey&&e.activeElement===l?(s.preventDefault(),p.focus()):!s.shiftKey&&e.activeElement===p&&(s.preventDefault(),l.focus())};return t.addEventListener("keydown",d),()=>{t.removeEventListener("keydown",d)}},K=e=>{const t=r=>{r.key==="Escape"&&(r.preventDefault(),e())};return document.addEventListener("keydown",t),()=>{document.removeEventListener("keydown",t)}},i="lagaufre";let v=!1;h(i,"init",null,!1,async e=>{if(!e.api&&!e.data){console.error("Missing API URL");return}v&&(c(i,"destroy"),await new Promise(o=>setTimeout(o,10)));const t=[];let r=!1;const d='<div id="wrapper" role="dialog" aria-modal="true" tabindex="-1">'+(e.headerLogo&&e.headerUrl?`<div id="header"><a href="${e.headerUrl}" target="_blank"><img src="${e.headerLogo}" id="header-logo"></a><button type="button" id="close">&times;</button></div>`:"")+'<div id="content"><div id="loading">Loading...</div><ul role="list" id="services-grid" style="display: none;"></ul><div id="error" style="display: none;"></div></div>'+(e.showFooter?'<div id="footer"><button id="ok-button">OK</button></div>':"")+"</div>",s=D(i,d,z),n=s.shadowRoot,l=n.querySelector("#wrapper"),p=n.querySelector("#loading"),u=n.querySelector("#services-grid"),w=n.querySelector("#error"),x=n.querySelector("#close"),C=n.querySelector("#ok-button"),$=n.querySelector("#header-logo"),q=o=>{if(o.position&&(l.style.position=o.position),o.top!=null||o.bottom!=null||o.left!=null||o.right!=null){const m=g=>{l.style[g]=typeof o[g]=="number"?`${o[g]}px`:"unset"};["top","bottom","left","right"].forEach(m)}o.fontFamily&&(l.style.fontFamily=o.fontFamily),o.background&&(l.style.background=o.background);const a=o.label||"Services",f=o.closeLabel||"Close";p.textContent=o.loadingText||"Loading...",l.setAttribute("aria-label",a),x&&x.setAttribute("aria-label",f),$&&($.alt=(o.headerLabel||"About LaSuite")+(o.newWindowLabelSuffix||""))};q(e),l.style.display="none";const k=o=>{p.style.display="none",u.style.display="none",w.style.display="block",w.textContent=o},T=o=>{u.innerHTML="",o.services.forEach(a=>{if(!a.logo)return;a.maturity=="stable"&&delete a.maturity;const f=document.createElement("li");f.className="service-card",f.innerHTML=`<a target="_blank"><img alt="" class="service-logo" onerror="this.style.display='none'"><div class="service-info"><div class="service-name"></div></div></a>`;const m=f.querySelector("a"),g=f.querySelector("img"),M=f.querySelector(".service-name");if(a.maturity){const S=document.createElement("div");S.className="maturity-badge",S.textContent=a.maturity,m.insertBefore(S,g.nextSibling)}m.setAttribute("aria-label",a.name+(a.maturity?` (${a.maturity})`:"")+(e.newWindowLabelSuffix||"")),m.href=a.url,g.src=a.logo,M.textContent=a.name,u.appendChild(f)}),p.style.display="none",w.style.display="none",u.style.display="grid"};if(e.data)T(e.data);else try{const a=await(await fetch(e.api,{method:"GET"})).json();a.error?k(`Error: ${JSON.stringify(a.error)}`):a.services&&a.services.length>0?T(a):k("No services found")}catch(o){k(`Failed to load services: ${o instanceof Error?o.message:"Unknown error"}`)}const j=o=>{e.dialogElement||s.contains(o.target)||c(i,"close")};let E=null,L=null;t.push(h(i,"open",null,!1,()=>{l.style.display="block",setTimeout(()=>{r=!0,document.addEventListener("click",j),l.focus()},200),E=H(n,l,"a,button"),e.dialogElement||(L=K(()=>{c(i,"close")})),c(i,"opened")})),t.push(h(i,"close",null,!1,()=>{E&&E(),L&&L(),r&&(l.style.display="none",r=!1,document.removeEventListener("click",j),c(i,"closed"))})),t.push(h(i,"toggle",null,!1,()=>{r?c(i,"close"):c(i,"open")})),t.push(h(i,"configure",null,!1,q)),C&&C.addEventListener("click",()=>{c(i,"close")}),x&&x.addEventListener("click",()=>{c(i,"close")}),e.dialogElement?e.dialogElement.appendChild(s):(l.className="wrapper-dialog",document.body.appendChild(s)),h(i,"destroy",null,!0,()=>{c(i,"close"),v=!1,s.remove(),t.forEach(o=>o())}),v=!0,c(i,"initialized"),e.open&&c(i,"open")}),W(i)})();
